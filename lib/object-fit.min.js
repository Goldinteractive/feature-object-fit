!function e(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("object-fit",[],i):"object"==typeof exports?exports["object-fit"]=i():t["object-fit"]=i()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,i){"use strict";/*! npm.im/iphone-inline-video 2.2.2 */
function n(e,t,i){function n(n){i&&!i(e,t)||n.stopImmediatePropagation()}return e.addEventListener(t,n),n}function o(e,t,i,n){function o(){return i[t]}function r(e){i[t]=e}n&&r(e[t]),Object.defineProperty(e,t,{get:o,set:r})}function r(e,t,i){i.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function a(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}function c(e){var t=new Audio;return r(e,"play",t),r(e,"playing",t),r(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}function s(e,t,i){(T||0)+200<Date.now()&&(e[j]=!0,T=Date.now()),i||(e.currentTime=t),_[++x%3]=100*t|0}function d(e){return e.driver.currentTime>=e.video.duration}function u(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&d(t)&&(t.driver.currentTime=0)),s(t.video,t.driver.currentTime)):t.video.networkState===t.video.NETWORK_IDLE&&0===t.video.buffered.length&&t.video.load(),t.video.ended&&(delete t.video[j],t.video.pause(!0))}function l(){var e=this,t=e[y];return e.webkitDisplayingFullscreen?void e[w]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(s(e,0,!0),t.driver.src=e.src),void(e.paused&&(t.paused=!1,0===e.buffered.length&&e.load(),t.driver.play(),t.updater.start(),t.hasAudio||(a(e,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&a(e,"playing")))))}function f(e){var t=this,i=t[y];i.driver.pause(),i.updater.stop(),t.webkitDisplayingFullscreen&&t[E](),i.paused&&!e||(i.paused=!0,i.hasAudio||a(t,"pause"),t.ended&&!t.webkitDisplayingFullscreen&&(t[j]=!0,a(t,"ended")))}function p(e,t){var n={};e[y]=n,n.paused=!0,n.hasAudio=t,n.video=e,n.updater=i.i(h.a)(u.bind(n)),t?n.driver=c(e):(e.addEventListener("canplay",function(){e.paused||a(e,"playing")}),n.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){n.driver.paused=!0},play:function(){n.driver.paused=!1,d(n)&&s(e,0)},get ended(){return d(n)}}),e.addEventListener("emptied",function(){var i=!n.driver.src||"data:"===n.driver.src;n.driver.src&&n.driver.src!==e.src&&(s(e,0,!0),n.driver.src=e.src,i||!t&&e.autoplay?n.driver.play():n.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?t&&0===n.driver.buffered.length&&n.driver.load():(e.pause(),e[w]())}),t&&(e.addEventListener("webkitendfullscreen",function(){n.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){_.indexOf(100*e.currentTime|0)<0&&(n.driver.currentTime=e.currentTime)}))}function b(e){var t=e[j];return delete e[j],!e.webkitDisplayingFullscreen&&!t}function v(e){var t=e[y];e[w]=e.play,e[E]=e.pause,e.play=l,e.pause=f,o(e,"paused",t.driver),o(e,"muted",t.driver,!0),o(e,"playbackRate",t.driver,!0),o(e,"ended",t.driver),o(e,"loop",t.driver,!0),n(e,"seeking",function(e){return!e.webkitDisplayingFullscreen}),n(e,"seeked",function(e){return!e.webkitDisplayingFullscreen}),n(e,"timeupdate",b),n(e,"ended",b)}function g(e,t){if(void 0===t&&(t={}),!e[y]){if(!t.everywhere){if(!m)return;if(!(t.iPad||t.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var i=e.autoplay;e.autoplay=!1,p(e,!e.muted),v(e),e.classList.add("IIV"),e.muted&&i&&(e.play(),e.addEventListener("playing",function t(){e.autoplay=!0,e.removeEventListener("playing",t)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}Object.defineProperty(t,"__esModule",{value:!0});var h=i(3),m="object"==typeof document&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,y="bfred-it:iphone-inline-video",j="bfred-it:iphone-inline-video:event",w="bfred-it:iphone-inline-video:nativeplay",E="bfred-it:iphone-inline-video:nativepause",_=[],x=0,T;t.default=g},function(e,t,i){"use strict";function n(e,t){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+e+"' height='"+t+"'%3E%3C/svg%3E"}function o(e){if(e.srcset&&!m&&window.picturefill){var t=window.picturefill._;e[t.ns]&&e[t.ns].evaled||t.fillImg(e,{reselect:!0}),e[t.ns].curSrc||(e[t.ns].supported=!1,t.fillImg(e,{reselect:!0})),e.currentSrc=e[t.ns].curSrc||e.src}}function r(e){for(var t=getComputedStyle(e).fontFamily,i,n={};null!==(i=p.exec(t));)n[i[1]]=i[2];return n}function a(e,t,i){var o=n(t||1,i||0);y.call(e,"src")!==o&&j.call(e,"src",o)}function c(e,t){e.naturalWidth?t(e):setTimeout(c,100,e,t)}function s(e){var t=r(e),i=e[f];if(t["object-fit"]=t["object-fit"]||"fill",!i.img){if("fill"===t["object-fit"])return;if(!i.skipTest&&v&&!t["object-position"])return}if(!i.img){i.img=new Image(e.width,e.height),i.img.srcset=y.call(e,"data-ofi-srcset")||e.srcset,i.img.src=y.call(e,"data-ofi-src")||e.src,j.call(e,"data-ofi-src",e.src),e.srcset&&j.call(e,"data-ofi-srcset",e.srcset),a(e,e.naturalWidth||e.width,e.naturalHeight||e.height),e.srcset&&(e.srcset="");try{d(e)}catch(e){window.console&&console.warn("https://bit.ly/ofi-old-browser")}}o(i.img),e.style.backgroundImage='url("'+(i.img.currentSrc||i.img.src).replace(/"/g,'\\"')+'")',e.style.backgroundPosition=t["object-position"]||"center",e.style.backgroundRepeat="no-repeat",e.style.backgroundOrigin="content-box",/scale-down/.test(t["object-fit"])?c(i.img,function(){i.img.naturalWidth>e.width||i.img.naturalHeight>e.height?e.style.backgroundSize="contain":e.style.backgroundSize="auto"}):e.style.backgroundSize=t["object-fit"].replace("none","auto").replace("fill","100% 100%"),c(i.img,function(t){a(e,t.naturalWidth,t.naturalHeight)})}function d(e){var t={get:function t(i){return e[f].img[i?i:"src"]},set:function t(i,n){return e[f].img[n?n:"src"]=i,j.call(e,"data-ofi-"+n,i),s(e),i}};Object.defineProperty(e,"src",t),Object.defineProperty(e,"currentSrc",{get:function(){return t.get("currentSrc")}}),Object.defineProperty(e,"srcset",{get:function(){return t.get("srcset")},set:function(e){return t.set(e,"srcset")}})}function u(){function e(e,t){return e[f]&&e[f].img&&("src"===t||"srcset"===t)?e[f].img:e}g||(HTMLImageElement.prototype.getAttribute=function(t){return y.call(e(this,t),t)},HTMLImageElement.prototype.setAttribute=function(t,i){return j.call(e(this,t),t,String(i))})}function l(e,t){var i=!w&&!e;if(t=t||{},e=e||"img",g&&!t.skipTest||!h)return!1;"img"===e?e=document.getElementsByTagName("img"):"string"==typeof e?e=document.querySelectorAll(e):"length"in e||(e=[e]);for(var n=0;n<e.length;n++)e[n][f]=e[n][f]||{skipTest:t.skipTest},s(e[n]);i&&(document.body.addEventListener("load",function(e){"IMG"===e.target.tagName&&l(e.target,{skipTest:t.skipTest})},!0),w=!0,e="img"),t.watchMQ&&window.addEventListener("resize",l.bind(null,e,{skipTest:t.skipTest}))}/*! npm.im/object-fit-images 3.2.3 */
var f="bfred-it:object-fit-images",p=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,b="undefined"==typeof Image?{style:{"object-position":1}}:new Image,v="object-fit"in b.style,g="object-position"in b.style,h="background-size"in b.style,m="string"==typeof b.currentSrc,y=b.getAttribute,j=b.setAttribute,w=!1;l.supportsObjectFit=v,l.supportsObjectPosition=g,u(),e.exports=l},function(e,t){/**
 * Object Fit Videos
 * Polyfill for object-fit and object-position CSS properties on video elements
 * Covers IE9, IE10, IE11, Edge, Safari <10
 *
 * Usage
 * In your CSS, add a special font-family tag for IE/Edge
 * video {
 *   object-fit: cover;
 *   font-family: 'object-fit: cover;';
 * }
 *
 * Before the closing body tag, or whenever the DOM is ready,
 * make the JavaScript call
 * objectFitVideos();
 *
 * All video elements with the special CSS property will be targeted
 *
 * @license  MIT (https://opensource.org/licenses/MIT)
 * @author   Todd Miller <todd.miller@tricomb2b.com>
 * @version  1.0.2
 * @changelog
 * 2016-08-19 - Adds object-position support.
 * 2016-08-19 - Add throttle function for more performant resize events
 * 2016-08-19 - Initial release with object-fit support, and
 *              object-position default 'center'
 * 2016-10-14 - No longer relies on window load event, instead requires a specific
 *              function call to initialize the videos for object fit and position.
 * 2016-11-28 - Support CommonJS environment, courtesy of @msorensson
 * 2016-12-05 - Refactors the throttling function to support IE
 * 2017-09-26 - Fix an issue with autplay not working on polyfilled videos
 *            - Adds the capability to specify elements to polyfill,
 *              instead of just checking every video element for the
 *              CSS property. Slight performance gain in most usecases,
 *              and a bigger gain in a few usecases.
 * 2017-10-24 - Add user agent check to enable polyfill for all Edge browsers.
 *              object-fit is supported on Edge >= 16, but currently just for images.
 */
var i=function(e){"use strict";function t(e){for(var t=getComputedStyle(e).fontFamily,i=null,n={};null!==(i=u.exec(t));)n[i[1]]=i[2];return n["object-position"]?o(n):n}function i(e){var i=-1;e?"length"in e||(e=[e]):e=document.querySelectorAll("video");for(;e[++i];){var o=t(e[i]);(o["object-fit"]||o["object-position"])&&(o["object-fit"]=o["object-fit"]||"fill",n(e[i],o))}}function n(e,t){function i(){var i=e.videoWidth,o=e.videoHeight,a=i/o,c=r.clientWidth,s=r.clientHeight,d=c/s,u=0,l=0;n.marginLeft=n.marginTop=0,(a<d?"contain"===t["object-fit"]:"cover"===t["object-fit"])?(u=s*a,l=c/a,n.width=Math.round(u)+"px",n.height=s+"px","left"===t["object-position-x"]?n.marginLeft=0:"right"===t["object-position-x"]?n.marginLeft=Math.round(c-u)+"px":n.marginLeft=Math.round((c-u)/2)+"px"):(l=c/a,n.width=c+"px",n.height=Math.round(l)+"px","top"===t["object-position-y"]?n.marginTop=0:"bottom"===t["object-position-y"]?n.marginTop=Math.round(s-l)+"px":n.marginTop=Math.round((s-l)/2)+"px"),e.autoplay&&e.play()}if("fill"!==t["object-fit"]){var n=e.style,o=window.getComputedStyle(e),r=document.createElement("object-fit");r.appendChild(e.parentNode.replaceChild(r,e));var a={height:"100%",width:"100%",boxSizing:"content-box",display:"inline-block",overflow:"hidden"};"backgroundColor backgroundImage borderColor borderStyle borderWidth bottom fontSize lineHeight left opacity margin position right top visibility".replace(/\w+/g,function(e){a[e]=o[e]});for(var c in a)r.style[c]=a[c];n.border=n.margin=n.padding=0,n.display="block",n.opacity=1,e.addEventListener("loadedmetadata",i),window.addEventListener("optimizedResize",i),e.readyState>=1&&(e.removeEventListener("loadedmetadata",i),i())}}function o(e){return~e["object-position"].indexOf("left")?e["object-position-x"]="left":~e["object-position"].indexOf("right")?e["object-position-x"]="right":e["object-position-x"]="center",~e["object-position"].indexOf("top")?e["object-position-y"]="top":~e["object-position"].indexOf("bottom")?e["object-position-y"]="bottom":e["object-position-y"]="center",e}function r(e,t,i){i=i||window;var n=!1,o=null;try{o=new CustomEvent(t)}catch(e){o=document.createEvent("Event"),o.initEvent(t,!0,!0)}var r=function(){n||(n=!0,requestAnimationFrame(function(){i.dispatchEvent(o),n=!1}))};i.addEventListener(e,r)}var a=navigator.userAgent.indexOf("Edge/")>=0,c=new Image,s="object-fit"in c.style&&!a,d="object-position"in c.style&&!a,u=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g;s&&d||(i(e),r("resize","optimizedResize"))};"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=i)},function(e,t,i){"use strict";/*! npm.im/intervalometer */
function n(e,t,i,n){function o(i){r=t(o,n),e(i-(a||i)),a=i}var r,a;return{start:function e(){r||o(0)},stop:function e(){i(r),r=null,a=0}}}function o(e){return n(e,requestAnimationFrame,cancelAnimationFrame)}function r(e,t){return n(e,setTimeout,clearTimeout,t)}i.d(t,"a",function(){return o})},function(e,t,i){var n,o,r;!function(a,c){var s;o=[t,i(1),i(2),i(0)],n=c,r="function"==typeof n?n.apply(t,o):n,!(void 0!==r&&(e.exports=r))}(this,function(e,t,i,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var s=o(t),d=o(i),u=o(n),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),f=".ft-fit-bg",p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),l(t,[{key:"init",value:function e(){var t=this;this._objectFit=this.node.getAttribute("data-object-fit"),this._objectPosition=this.node.getAttribute("data-object-position"),this._objectFit&&this._objectPosition?(this.node.style.objectFit=this._objectFit,this.node.style.objectPosition=this._objectPosition,this.node.style.fontFamily='"object-fit: '+this._objectFit+"; object-position: "+this._objectPosition+'"'):this._objectFit?(this.node.style.objectFit=this._objectFit,this.node.style.fontFamily='"object-fit: '+this._objectFit+"; object-position: "+this.options.defaultObjectPosition+'"'):this._objectPosition&&(this.node.style.objectPosition=this._objectPosition,this.node.style.fontFamily='"object-fit: '+this.options.defaultObjectFit+"; object-position: "+this._objectPosition+'"'),"video"==this.node.nodeName.toLowerCase()?!function(){(0,d.default)(t.node),(0,u.default)(t.node,{iPad:t.options.iPad});var e=function e(){t.node.readyState>=t.node.HAVE_CURRENT_DATA&&(t.removeEventListener(t.node,"loadeddata",e),t._removeInitialHide(),t.node.autoplay&&t.node.play())};t.node.readyState>=t.node.HAVE_CURRENT_DATA||!t.options.waitForMediaLoaded?(t._removeInitialHide(),t.node.autoplay&&t.node.play()):t.addEventListener(t.node,"loadeddata",e)}():((0,s.default)(this.node,{watchMQ:this.options.watchMQ}),this.node.naturalWidth||!this.options.waitForMediaLoaded?this._removeInitialHide():!function(){var e=function e(){t.removeEventListener(t.node,"load",e),t._removeInitialHide()};t.addEventListener(t.node,"load",e)}())}},{key:"_removeInitialHide",value:function e(){var t=this;window.setTimeout(function(){"object-fit"===t.node.parentElement.tagName.toLowerCase()&&(t.node.parentElement.style.visibility="inherit",t.node.parentElement.style.opacity="inherit"),t.node.closest(f).classList.remove(t.options.classInitialHide)},0)}}]),t}(base.features.Feature);p.defaultOptions={iPad:!0,watchMQ:!1,waitForMediaLoaded:!0,defaultObjectFit:"cover",defaultObjectPosition:"center center",classInitialHide:"-initial-hide"},e.default=p})}])});
//# sourceMappingURL=object-fit.min.js.map