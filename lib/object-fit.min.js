!function t(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("object-fit",[],i):"object"==typeof exports?exports["object-fit"]=i():e["object-fit"]=i()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function e(){return t.default}:function e(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,i){"use strict";/*! npm.im/iphone-inline-video 2.0.2 */
function n(t,e,i,n){function o(e){Boolean(t[i])===Boolean(n)&&e.stopImmediatePropagation(),delete t[i]}return t.addEventListener(e,o,!1),o}function o(t,e,i,n){function o(){return i[e]}function r(t){i[e]=t}n&&r(t[e]),Object.defineProperty(t,e,{get:o,set:r})}function r(t,e,i){i.addEventListener(e,function(){return t.dispatchEvent(new Event(e))})}function c(t,e){Promise.resolve().then(function(){t.dispatchEvent(new Event(e))})}function s(t){var e=new Audio;return r(t,"play",e),r(t,"playing",e),r(t,"pause",e),e.crossOrigin=t.crossOrigin,e.src=t.src||t.currentSrc||"data:",e}function a(t,e,i){(x||0)+200<Date.now()&&(t[y]=!0,x=Date.now()),i||(t.currentTime=e),P[++_%3]=100*e|0}function u(t){return t.driver.currentTime>=t.video.duration}function d(t){var e=this;e.video.readyState>=e.video.HAVE_FUTURE_DATA?(e.hasAudio||(e.driver.currentTime=e.video.currentTime+t*e.video.playbackRate/1e3,e.video.loop&&u(e)&&(e.driver.currentTime=0)),a(e.video,e.driver.currentTime)):e.video.networkState===e.video.NETWORK_IDLE&&0===e.video.buffered.length&&e.video.load(),e.video.ended&&(delete e.video[y],e.video.pause(!0))}function l(){var t=this,e=t[m];return t.webkitDisplayingFullscreen?void t[j]():("data:"!==e.driver.src&&e.driver.src!==t.src&&(a(t,0,!0),e.driver.src=t.src),void(t.paused&&(e.paused=!1,0===t.buffered.length&&t.load(),e.driver.play(),e.updater.start(),e.hasAudio||(c(t,"play"),e.video.readyState>=e.video.HAVE_ENOUGH_DATA&&c(t,"playing")))))}function f(t){var e=this,i=e[m];i.driver.pause(),i.updater.stop(),e.webkitDisplayingFullscreen&&e[w](),i.paused&&!t||(i.paused=!0,i.hasAudio||c(e,"pause"),e.ended&&(e[y]=!0,c(e,"ended")))}function p(t,e){var n=t[m]={};n.paused=!0,n.hasAudio=e,n.video=t,n.updater=i.i(h.a)(d.bind(n)),e?n.driver=s(t):(t.addEventListener("canplay",function(){t.paused||c(t,"playing")}),n.driver={src:t.src||t.currentSrc||"data:",muted:!0,paused:!0,pause:function(){n.driver.paused=!0},play:function(){n.driver.paused=!1,u(n)&&a(t,0)},get ended(){return u(n)}}),t.addEventListener("emptied",function(){var e=!n.driver.src||"data:"===n.driver.src;n.driver.src&&n.driver.src!==t.src&&(a(t,0,!0),n.driver.src=t.src,e?n.driver.play():n.updater.stop())},!1),t.addEventListener("webkitbeginfullscreen",function(){t.paused?e&&0===n.driver.buffered.length&&n.driver.load():(t.pause(),t[j]())}),e&&(t.addEventListener("webkitendfullscreen",function(){n.driver.currentTime=t.currentTime}),t.addEventListener("seeking",function(){P.indexOf(100*t.currentTime|0)<0&&(n.driver.currentTime=t.currentTime)}))}function b(t){var e=t[m];t[j]=t.play,t[w]=t.pause,t.play=l,t.pause=f,o(t,"paused",e.driver),o(t,"muted",e.driver,!0),o(t,"playbackRate",e.driver,!0),o(t,"ended",e.driver),o(t,"loop",e.driver,!0),n(t,"seeking"),n(t,"seeked"),n(t,"timeupdate",y,!1),n(t,"ended",y,!1)}function v(t,e){if(void 0===e&&(e={}),!t[m]){if(!e.everywhere){if(!g)return;if(!(e.iPad||e.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}!t.paused&&t.webkitDisplayingFullscreen&&t.pause(),p(t,!t.muted),b(t),t.classList.add("IIV"),t.muted&&t.autoplay&&t.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}Object.defineProperty(e,"__esModule",{value:!0});var h=i(3),g="object"==typeof document&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,m="bfred-it:iphone-inline-video",y="bfred-it:iphone-inline-video:event",j="bfred-it:iphone-inline-video:nativeplay",w="bfred-it:iphone-inline-video:nativepause",P=[],_=0,x;e.default=v},function(t,e,i){"use strict";function n(t,e){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+t+"' height='"+e+"'%3E%3C/svg%3E"}function o(t){if(t.srcset&&!m&&window.picturefill){var e=window.picturefill._;t[e.ns]&&t[e.ns].evaled||e.fillImg(t,{reselect:!0}),t[e.ns].curSrc||(t[e.ns].supported=!1,e.fillImg(t,{reselect:!0})),t.currentSrc=t[e.ns].curSrc||t.src}}function r(t){for(var e=getComputedStyle(t).fontFamily,i,n={};null!==(i=p.exec(e));)n[i[1]]=i[2];return n}function c(t,e,i){var o=n(e||1,i||0);y.call(t,"src")!==o&&j.call(t,"src",o)}function s(t,e){t.naturalWidth?e(t):setTimeout(s,100,t,e)}function a(t){var e=r(t),i=t[f];if(e["object-fit"]=e["object-fit"]||"fill",!i.img){if("fill"===e["object-fit"])return;if(!i.skipTest&&v&&!e["object-position"])return}if(!i.img){i.img=new Image(t.width,t.height),i.img.srcset=y.call(t,"data-ofi-srcset")||t.srcset,i.img.src=y.call(t,"data-ofi-src")||t.src,j.call(t,"data-ofi-src",t.src),t.srcset&&j.call(t,"data-ofi-srcset",t.srcset),c(t,t.naturalWidth||t.width,t.naturalHeight||t.height),t.srcset&&(t.srcset="");try{u(t)}catch(t){window.console&&console.log("http://bit.ly/ofi-old-browser")}}o(i.img),t.style.backgroundImage="url("+(i.img.currentSrc||i.img.src).replace("(","%28").replace(")","%29")+")",t.style.backgroundPosition=e["object-position"]||"center",t.style.backgroundRepeat="no-repeat",/scale-down/.test(e["object-fit"])?s(i.img,function(){i.img.naturalWidth>t.width||i.img.naturalHeight>t.height?t.style.backgroundSize="contain":t.style.backgroundSize="auto"}):t.style.backgroundSize=e["object-fit"].replace("none","auto").replace("fill","100% 100%"),s(i.img,function(e){c(t,e.naturalWidth,e.naturalHeight)})}function u(t){var e={get:function e(i){return t[f].img[i?i:"src"]},set:function e(i,n){return t[f].img[n?n:"src"]=i,j.call(t,"data-ofi-"+n,i),a(t),i}};Object.defineProperty(t,"src",e),Object.defineProperty(t,"currentSrc",{get:function(){return e.get("currentSrc")}}),Object.defineProperty(t,"srcset",{get:function(){return e.get("srcset")},set:function(t){return e.set(t,"srcset")}})}function d(){function t(t,e){return t[f]&&t[f].img&&("src"===e||"srcset"===e)?t[f].img:t}h||(HTMLImageElement.prototype.getAttribute=function(e){return y.call(t(this,e),e)},HTMLImageElement.prototype.setAttribute=function(e,i){return j.call(t(this,e),e,String(i))})}function l(t,e){var i=!w&&!t;if(e=e||{},t=t||"img",h&&!e.skipTest||!g)return!1;"string"==typeof t?t=document.querySelectorAll(t):"length"in t||(t=[t]);for(var n=0;n<t.length;n++)t[n][f]=t[n][f]||{skipTest:e.skipTest},a(t[n]);i&&(document.body.addEventListener("load",function(t){"IMG"===t.target.tagName&&l(t.target,{skipTest:e.skipTest})},!0),w=!0,t="img"),e.watchMQ&&window.addEventListener("resize",l.bind(null,t,{skipTest:e.skipTest}))}Object.defineProperty(e,"__esModule",{value:!0});/*! npm.im/object-fit-images */
var f="bfred-it:object-fit-images",p=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,b=new Image,v="object-fit"in b.style,h="object-position"in b.style,g="background-size"in b.style,m="string"==typeof b.currentSrc,y=b.getAttribute,j=b.setAttribute,w=!1;l.supportsObjectFit=v,l.supportsObjectPosition=h,d(),e.default=l},function(t,e){/**
 * Object Fit Videos
 * Polyfill for object-fit and object-position CSS properties on video elements
 * Covers IE9, IE10, IE11, Edge, Safari <10
 *
 * Usage
 * In your CSS, add a special font-family tag for IE/Edge
 * video {
 *   object-fit: cover;
 *   font-family: 'object-fit: cover;';
 * }
 *
 * Before the closing body tag, or whenever the DOM is ready,
 * make the JavaScript call
 * objectFitVideos();
 *
 * All video elements with the special CSS property will be targeted
 *
 * @license  MIT (https://opensource.org/licenses/MIT)
 * @author   Todd Miller <todd.miller@tricomb2b.com>
 * @version  1.0.2
 * @changelog
 * 2016-08-19 - Adds object-position support.
 * 2016-08-19 - Add throttle function for more performant resize events
 * 2016-08-19 - Initial release with object-fit support, and
 *              object-position default 'center'
 * 2016-10-14 - No longer relies on window load event, instead requires a specific
 *              function call to initialize the videos for object fit and position.
 * 2016-11-28 - Support CommonJS environment, courtesy of @msorensson
 * 2016-12-05 - Refactors the throttling function to support IE
 */
var i=function(t){"use strict";function e(t){for(var e=getComputedStyle(t).fontFamily,i=null,n={};null!==(i=u.exec(e));)n[i[1]]=i[2];return n["object-position"]?o(n):n}function i(t){var i=-1;t=t||"video","string"==typeof t?t=document.querySelectorAll(t):"length"in t||(t=[t]);for(;t[++i];){var o=e(t[i]);(o["object-fit"]||o["object-position"])&&(o["object-fit"]=o["object-fit"]||"fill",n(t[i],o))}}function n(t,e){function i(){var i=t.videoWidth,o=t.videoHeight,c=i/o,s=r.clientWidth,a=r.clientHeight,u=s/a,d=0,l=0;n.marginLeft=n.marginTop=0,(c<u?"contain"===e["object-fit"]:"cover"===e["object-fit"])?(d=a*c,l=s/c,n.width=Math.round(d)+"px",n.height=a+"px","left"===e["object-position-x"]?n.marginLeft=0:"right"===e["object-position-x"]?n.marginLeft=Math.round(s-d)+"px":n.marginLeft=Math.round((s-d)/2)+"px"):(l=s/c,n.width=s+"px",n.height=Math.round(l)+"px","top"===e["object-position-y"]?n.marginTop=0:"bottom"===e["object-position-y"]?n.marginTop=Math.round(a-l)+"px":n.marginTop=Math.round((a-l)/2)+"px")}if("fill"!==e["object-fit"]){var n=t.style,o=window.getComputedStyle(t),r=document.createElement("object-fit");r.appendChild(t.parentNode.replaceChild(r,t));var c={height:"100%",width:"100%",boxSizing:"content-box",display:"inline-block",overflow:"hidden"};"backgroundColor backgroundImage borderColor borderStyle borderWidth bottom fontSize lineHeight left opacity margin position right top visibility".replace(/\w+/g,function(t){c[t]=o[t]});for(var s in c)r.style[s]=c[s];n.border=n.margin=n.padding=0,n.display="block",n.opacity=1,t.addEventListener("loadedmetadata",i),window.addEventListener("optimizedResize",i),t.readyState>=1&&(t.removeEventListener("loadedmetadata",i),i())}}function o(t){return~t["object-position"].indexOf("left")?t["object-position-x"]="left":~t["object-position"].indexOf("right")?t["object-position-x"]="right":t["object-position-x"]="center",~t["object-position"].indexOf("top")?t["object-position-y"]="top":~t["object-position"].indexOf("bottom")?t["object-position-y"]="bottom":t["object-position-y"]="center",t}function r(t,e,i){i=i||window;var n=!1,o=null;try{o=new CustomEvent(e)}catch(t){o=document.createEvent("Event"),o.initEvent(e,!0,!0)}var r=function(){n||(n=!0,requestAnimationFrame(function(){i.dispatchEvent(o),n=!1}))};i.addEventListener(t,r)}var c=new Image,s="object-fit"in c.style,a="object-position"in c.style,u=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g;s&&a||(i(t),r("resize","optimizedResize"))};"undefined"!=typeof t&&"undefined"!=typeof t.exports&&(t.exports=i)},function(t,e,i){"use strict";/*! npm.im/intervalometer */
function n(t,e,i,n){function o(i){r=e(o,n),t(i-(c||i)),c=i}var r,c;return{start:function t(){r||o(0)},stop:function t(){i(r),r=null,c=0}}}function o(t){return n(t,requestAnimationFrame,cancelAnimationFrame)}function r(t,e){return n(t,setTimeout,clearTimeout,e)}i.d(e,"a",function(){return o})},function(t,e,i){var n,o,r;!function(c,s){var a;o=[e,i(1),i(2),i(0)],n=s,r="function"==typeof n?n.apply(e,o):n,!(void 0!==r&&(t.exports=r))}(this,function(t,e,i,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0});var a=o(e),u=o(i),d=o(n),l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),f=function(t){function e(){return r(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),l(e,[{key:"init",value:function t(){this._objectFit=this.node.getAttribute("data-object-fit"),this._objectPosition=this.node.getAttribute("data-object-position"),this._objectFit&&this._objectPosition?(this.node.style.objectFit=this._objectFit,this.node.style.objectPosition=this._objectPosition,this.node.style.fontFamily='"object-fit: '+this._objectFit+"; object-position: "+this._objectPosition+'"'):this._objectFit?(this.node.style.objectFit=this._objectFit,this.node.style.fontFamily='"object-fit: '+this._objectFit+"; object-position: "+this.options.defaultObjectPosition+'"'):this._objectPosition&&(this.node.style.objectPosition=this._objectPosition,this.node.style.fontFamily='"object-fit: '+this.options.defaultObjectFit+"; object-position: "+this._objectPosition+'"'),"video"==this.node.nodeName.toLowerCase()?((0,u.default)(this.node),(0,d.default)(this.node,{iPad:this.options.iPad}),this.node.autoplay&&this.node.play()):(0,a.default)(this.node,{watchMQ:this.options.watchMQ})}}]),e}(base.features.Feature);f.defaultOptions={iPad:!0,watchMQ:!1,defaultObjectFit:"cover",defaultObjectPosition:"center center"},t.default=f})}])});
//# sourceMappingURL=object-fit.min.js.map